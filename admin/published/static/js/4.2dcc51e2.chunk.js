(this["webpackJsonpparvaty-admin-panel"]=this["webpackJsonpparvaty-admin-panel"]||[]).push([[4],{639:function(e,t,n){"use strict";var s=n(640),a=n(163);t.a=function e(){var t=this;Object(s.a)(this,e),this.get=function(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},i={};if(i.method=e,a){var o=new Headers;o.append("Authorization","Bearer "+t.state.authToken),i.headers=o}if(s){var l=t.getFormData(s);i.body=l}fetch(t.baseUrl+n,i).then((function(e){return e.json()})).then((function(e){1===e.status?c(e.data,e.message):r(e.message)}),(function(e){r("Something went wrong, please contact the admin or try again later.")}))},this.getFormData=function(e){var t=new FormData;if(e)for(var n in e)e.hasOwnProperty(n)&&t.append(n,e[n]);return t},this.checkUser=function(){t.get("GET","/check",null,!0,(function(e,t){a.a.dispatch({type:"set",userPermissions:e}),localStorage.setItem("userPermissions",JSON.stringify(e))}),(function(e){console.log(e)}))},this.baseUrl="https://parvaty.me/api/admin",this.state=a.a.getState()}},640:function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return s}))},641:function(e,t,n){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],s=!0,a=!1,c=void 0;try{for(var r,i=e[Symbol.iterator]();!(s=(r=i.next()).done)&&(n.push(r.value),!t||n.length!==t);s=!0);}catch(o){a=!0,c=o}finally{try{s||null==i.return||i.return()}finally{if(a)throw c}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return a}))},663:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),c=n(160),r=n.n(c),i=n(19),o=n(58),l=n(637),d=n(164),u=n(161);function j(e){var t=Object(u.c)((function(e){return e.userPermissions})),n=!1;return null!==t&&""!==t&&(n=void 0!==t.find((function(t){return t.name===e}))),n}var m=n(24),b=function(){return Object(m.jsx)("div",{className:"vh-70 c-default-layout flex-row align-items-center",children:Object(m.jsx)(l.m,{children:Object(m.jsx)(l.L,{className:"justify-content-center",children:Object(m.jsx)(l.l,{md:"6",children:Object(m.jsxs)("div",{className:"text-center",children:[Object(m.jsx)("h4",{className:"pt-3",children:"Access Denied"}),Object(m.jsx)("p",{className:"text-muted",children:"You don't have permission to access this page."})]})})})})})},h=Object(m.jsx)("div",{className:"pt-3 text-center",children:Object(m.jsx)("div",{className:"sk-spinner sk-spinner-pulse"})}),p=function(){var e=j;return Object(m.jsx)("main",{className:"c-main",children:Object(m.jsx)(l.m,{fluid:!0,children:Object(m.jsx)(s.Suspense,{fallback:h,children:Object(m.jsxs)(i.d,{children:[d.a.map((function(t,n){return e(t.permission)?t.component&&Object(m.jsx)(i.b,{path:t.path,exact:t.exact,name:t.name,render:function(e){return Object(m.jsx)(l.t,{children:Object(m.jsx)(t.component,Object(o.a)({},e))})}},n):t.component&&Object(m.jsx)(i.b,{path:t.path,exact:t.exact,name:t.name,render:function(e){return Object(m.jsx)(l.t,{children:Object(m.jsx)(b,Object(o.a)({},e))})}},n)})),Object(m.jsx)(i.a,{from:"/",to:"/dashboard"})]})})})})},O=a.a.memo(p),x=function(){return Object(m.jsxs)(l.u,{fixed:!1,children:[Object(m.jsxs)("div",{children:[(new Date).getFullYear(),"  \xa9 Parvaty.me"]}),Object(m.jsxs)("div",{className:"mfs-auto",children:[Object(m.jsx)("span",{className:"mr-1",children:"Powered by"}),Object(m.jsx)("a",{href:"https://coreui.io/react",target:"_blank",rel:"noopener noreferrer",children:"CoreUI"})]})]})},f=a.a.memo(x),g=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.sidebarShow}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.w,{withSubheader:!0,children:[Object(m.jsx)(l.W,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var n=!![!1,"responsive"].includes(t)||"responsive";e({type:"set",sidebarShow:n})}}),Object(m.jsx)(l.W,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var n=![!0,"responsive"].includes(t)&&"responsive";e({type:"set",sidebarShow:n})}}),Object(m.jsx)(l.x,{className:"mx-auto d-lg-none",to:"/",children:Object(m.jsx)(l.z,{src:"images/brand/logo.webp",height:"35",alt:"Logo"})}),Object(m.jsxs)(l.y,{className:"px-3 ml-auto",children:[Object(m.jsx)(k,{}),Object(m.jsx)(C,{})]})]}),Object(m.jsx)(l.V,{className:"px-3 justify-content-between",children:Object(m.jsx)(l.e,{className:"border-0 c-subheader-nav m-0 px-0 px-md-3",routes:d.a})})]})},v=n(162),w=n(641),N=n(639),y=n(638),S=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='77.155 272.034 351.75 272.034 351.75 272.033 351.75 240.034 351.75 240.033 77.155 240.033 152.208 164.98 152.208 164.98 152.208 164.979 129.58 142.353 15.899 256.033 15.9 256.034 15.899 256.034 129.58 369.715 152.208 347.088 152.208 347.087 152.208 347.087 77.155 272.034' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='160 16 160 48 464 48 464 464 160 464 160 496 496 496 496 16 160 16' class='ci-primary'/>"],C=function(){var e=Object(u.b)(),t=Object(i.g)(),n=Object(u.c)((function(e){return e.authUser})),a=Object(s.useState)(!1),c=Object(w.a)(a,2),d=c[0],j=c[1],b=Object(s.useState)(!1),h=Object(w.a)(b,2),p=h[0],O=h[1],x=Object(s.useState)({show:!1,text:null,type:"info"}),f=Object(w.a)(x,2),g=f[0],C=f[1],k=Object(s.useState)({current_password:null,password:null,password_confirmation:null}),P=Object(w.a)(k,2),I=P[0],_=P[1],R=function(){j(!d),_({current_password:null,password:null,password_confirmation:null}),C({show:!1,text:null,type:"info"})},D=function(e){_(Object(o.a)(Object(o.a)({},I),{},Object(v.a)({},e.target.name,e.target.value)))},M=function(){O(!0),(new N.a).get("POST","/change/password",I,!0,(function(e,t){O(!1),C({show:!0,text:t,type:"success"})}),(function(e){O(!1),C({show:!0,text:e,type:"danger"})}))};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.p,{inNav:!0,className:"c-header-nav-items mx-2",direction:"down",children:[Object(m.jsx)(l.s,{className:"c-header-nav-link",caret:!1,children:Object(m.jsx)("div",{className:"c-avatar",children:Object(m.jsx)(y.a,{name:"cil-user",size:"lg",className:"c-avatar-img",alt:"admin"})})}),Object(m.jsxs)(l.r,{className:"pt-0",placement:"bottom-end",children:[Object(m.jsx)(l.q,{header:!0,tag:"div",color:"light",className:"text-center",children:Object(m.jsxs)("strong",{children:[n?n.name:"User","'s Account"]})}),Object(m.jsxs)(l.q,{children:[Object(m.jsx)(y.a,{name:"cil-bell",className:"mfe-2"}),"Updates",Object(m.jsx)(l.b,{color:"info",className:"mfs-auto",children:"0"})]}),Object(m.jsxs)(l.q,{children:[Object(m.jsx)(y.a,{name:"cil-envelope-open",className:"mfe-2"}),"Messages",Object(m.jsx)(l.b,{color:"success",className:"mfs-auto",children:"0"})]}),Object(m.jsxs)(l.q,{onClick:R,children:[Object(m.jsx)(y.a,{name:"cil-lock-locked",className:"mfe-2"}),"Change Password"]}),Object(m.jsxs)(l.q,{children:[Object(m.jsx)(y.a,{name:"cil-settings",className:"mfe-2"}),"Settings"]}),Object(m.jsx)(l.q,{divider:!0}),Object(m.jsxs)(l.q,{onClick:function(){(new N.a).get("POST","/logout",null,!0,(function(n,s){e({type:"set",userRole:null}),r.a.remove("authToken"),localStorage.removeItem("authUserRole"),localStorage.removeItem("userPermissions"),t.push("/login")}),(function(e){}))},children:[Object(m.jsx)(y.a,{content:S,className:"mfe-2"}),"Logout"]})]})]}),Object(m.jsxs)(l.H,{centered:!0,size:"sm",show:d,onClose:R,children:[Object(m.jsx)(l.J,{closeButton:!0,children:"Change Login Password"}),Object(m.jsxs)(l.I,{children:[Object(m.jsx)(l.a,{color:g.type,show:g.show,onShowChange:function(e){C(Object(o.a)(Object(o.a)({},g),{},{show:e}))},closeButton:!0,children:g.text}),Object(m.jsxs)(l.v,{onSubmit:function(e){e.preventDefault(),M()},children:[Object(m.jsx)(l.F,{htmlFor:"oldPassword",children:"Current Password"}),Object(m.jsxs)(l.B,{className:"mb-3",children:[Object(m.jsx)(l.D,{children:Object(m.jsx)(l.E,{children:Object(m.jsx)(y.a,{name:"cil-lock-locked"})})}),Object(m.jsx)(l.A,{id:"oldPassword",autoComplete:"true",name:"current_password",type:"password",placeholder:"Current Password",onChange:D})]}),Object(m.jsx)(l.F,{htmlFor:"newPassword",children:"New Password"}),Object(m.jsxs)(l.B,{className:"mb-1",children:[Object(m.jsx)(l.D,{children:Object(m.jsx)(l.E,{children:Object(m.jsx)(y.a,{name:"cil-lock-locked"})})}),Object(m.jsx)(l.A,{id:"newPassword",autoComplete:"true",name:"password",type:"password",placeholder:"New Password",onChange:D})]}),Object(m.jsxs)(l.B,{className:"mb-3",children:[Object(m.jsx)(l.D,{children:Object(m.jsx)(l.E,{children:Object(m.jsx)(y.a,{name:"cil-lock-locked"})})}),Object(m.jsx)(l.A,{id:"newCPassword",autoComplete:"true",name:"password_confirmation",type:"password",placeholder:"Confirm New Password",onChange:D})]}),Object(m.jsx)(l.L,{children:Object(m.jsx)(l.l,{xs:"12",className:"text-right",children:Object(m.jsx)(l.f,{block:!0,color:"primary",type:"submit",className:"px-4",children:p?Object(m.jsx)(l.U,{className:"mt-1",color:"light",size:"sm"}):"Change Password"})})})]})]})]})]})},k=function(){return Object(m.jsxs)(l.p,{inNav:!0,className:"c-header-nav-item mx-2",children:[Object(m.jsxs)(l.s,{className:"c-header-nav-link",caret:!1,children:[Object(m.jsx)(y.a,{name:"cil-bell",size:"lg"}),Object(m.jsx)(l.b,{shape:"pill",color:"danger",children:5})]}),Object(m.jsxs)(l.r,{placement:"bottom-end",className:"pt-0",children:[Object(m.jsx)(l.q,{header:!0,tag:"div",className:"text-center",color:"light",children:Object(m.jsxs)("strong",{children:["You have ",5," notifications"]})}),Object(m.jsxs)(l.q,{children:[Object(m.jsx)(y.a,{name:"cil-user-follow",className:"mr-2 text-success"})," New user registered"]}),Object(m.jsxs)(l.q,{children:[Object(m.jsx)(y.a,{name:"cil-user-unfollow",className:"mr-2 text-danger"})," User deleted"]}),Object(m.jsxs)(l.q,{children:[Object(m.jsx)(y.a,{name:"cil-chart-pie",className:"mr-2 text-info"})," Sales report is ready"]}),Object(m.jsxs)(l.q,{children:[Object(m.jsx)(y.a,{name:"cil-basket",className:"mr-2 text-primary"})," New client"]}),Object(m.jsxs)(l.q,{children:[Object(m.jsx)(y.a,{name:"cil-speedometer",className:"mr-2 text-warning"})," Server overloaded"]})]})]})},P=n(640),I=new function e(){var t=this;Object(P.a)(this,e),this.getRoute=function(e){return t.routes.find((function(t){return t.routeName===e}))},this.header=function(e){t.sidebarMenu.push({_tag:"CSidebarNavTitle",_children:[e]})},this.menu=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(void 0!==t.getRoute(e))return t.sidebarMenu.push({_tag:"CSidebarNavItem",to:t.getRoute(e).path,name:n||t.getRoute(e).name,permission:t.getRoute(e).permission,icon:s?t.getIcon(s):t.getRoute(e).icon?t.getIcon(t.getRoute(e).icon):t.defaultIcon}),t.sidebarMenu.length-1},this.subMenu=function(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(void 0!==t.getRoute(n)){t.sidebarMenu[e].route=t.sidebarMenu[e].to,t.sidebarMenu[e]._tag="CSidebarNavDropdown",t.sidebarMenu[e]._children=[],delete t.sidebarMenu[e].to;var c={_tag:"CSidebarNavItem",to:t.getRoute(n).path,name:s||t.getRoute(n).name,icon:a?t.getIcon(a):t.getRoute(n).icon?t.getIcon(t.getRoute(n).icon):t.defaultIcon};t.getRoute(n).permission&&(c.permission=t.getRoute(n).permission),t.sidebarMenu[e]._children.push(c)}},this.getIcon=function(e){var t=Object(m.jsx)(y.a,{name:"cil-file",customClasses:"c-sidebar-nav-icon"});return e&&(t=Object(m.jsx)(y.a,{name:e,customClasses:"c-sidebar-nav-icon"}),"string"!==typeof e&&(t=Object(m.jsx)(y.a,{content:e,customClasses:"c-sidebar-nav-icon"}))),t},this.routes=d.a,this.sidebarMenu=[],this.defaultIcon=Object(m.jsx)(y.a,{name:"cil-file",customClasses:"c-sidebar-nav-icon"})};I.header("Dashboard"),I.menu("dashboard"),I.menu("dashboard.users"),I.header("Droplets"),I.menu("droplets.users"),I.menu("droplets.projects"),I.menu("droplets"),I.menu("droplets.invoices"),I.header("Settings"),I.menu("dashboard.settings"),I.menu("dashboard.payments"),I.menu("dashboard.notifications");var _=I.sidebarMenu,R=function(){var e=function(e){var t=Object(u.c)((function(e){return e.userPermissions})),n=[];return t.length>0&&e.forEach((function(e){if("CSidebarNavItem"===e._tag)e.hasOwnProperty("permission")?void 0!==t.find((function(t){return t.name===e.permission}))&&n.push(e):n.push(e);else if("CSidebarNavDropdown"===e._tag){var s=[];e.hasOwnProperty("_children")&&e._children.forEach((function(e){e.hasOwnProperty("permission")?void 0!==t.find((function(t){return t.name===e.permission}))&&s.push(e):s.push(e)})),e._children=s,s.length>0&&n.push(e)}else"CSidebarNavTitle"===e._tag&&n.push(e)})),n}(_),t=Object(u.b)(),n=Object(u.c)((function(e){return e.sidebarShow}));return Object(m.jsxs)(l.M,{show:n,onShowChange:function(e){return t({type:"set",sidebarShow:e})},children:[Object(m.jsxs)(l.N,{className:"d-md-down-none",to:"/",children:[Object(m.jsx)(l.z,{className:"mr-0 ml-3 c-sidebar-brand-full",src:"/images/brand/logo.webp",height:30}),Object(m.jsx)(l.z,{className:"mr-2 ml-2 c-sidebar-brand-minimized",src:"/images/brand/logo.webp",height:30}),Object(m.jsx)("h5",{style:{whiteSpace:"nowrap"},className:"ml-2 mt-2 mr-auto c-sidebar-brand-full",children:"Parvaty Cloud Hosting"})]}),Object(m.jsx)(l.P,{children:Object(m.jsx)(l.n,{items:e,components:{CSidebarNavDivider:l.Q,CSidebarNavDropdown:l.R,CSidebarNavItem:l.S,CSidebarNavTitle:l.T}})}),Object(m.jsx)(l.O,{className:"c-d-md-down-none"})]})},D=a.a.memo(R);t.default=function(){var e=r.a.get("authToken");return Object(s.useEffect)((function(){(new N.a).checkUser()}),[]),Object(m.jsxs)("div",{className:"c-app c-default-layout",children:[Object(m.jsx)(D,{}),Object(m.jsxs)("div",{className:"c-wrapper",children:[Object(m.jsx)(g,{}),Object(m.jsx)("div",{className:"c-body",children:"undefined"===e||void 0===e||""===e||null===e?Object(m.jsx)(i.a,{to:"/login"}):Object(m.jsx)(O,{})}),Object(m.jsx)(f,{})]})]})}}}]);
//# sourceMappingURL=4.2dcc51e2.chunk.js.map