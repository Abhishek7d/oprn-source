(this["webpackJsonpparvaty-admin-panel"]=this["webpackJsonpparvaty-admin-panel"]||[]).push([[6],{506:function(e,t,n){"use strict";n.r(t);var a=n(162),s=n(58),c=n(641),r=n(1),i=n(160),o=n(19),l=n(161),u=n.n(l),h=n(639),d=n(637),j=n(638),f=n(24);t.default=function(e){var t=Object(i.b)(),n=Object(o.g)(),l=Object(o.i)(),b=u.a.get("authToken"),m=Object(r.useState)(!1),p=Object(c.a)(m,2),O=p[0],g=p[1],y=Object(r.useState)(!1),x=Object(c.a)(y,2),v=x[0],w=x[1],S=Object(r.useState)({show:!1,text:null,type:"info"}),k=Object(c.a)(S,2),N=k[0],A=k[1],T=Object(r.useState)({email:null,password:null}),E=Object(c.a)(T,2),U=E[0],C=E[1];Object(r.useEffect)((function(){if(l.status){var e="",t="";"verified"===l.status||"already-verified"===l.status?(e="Email Verified Successfully.",t="success"):"invalid-user"===l.status&&(e="Invalid Email Address",t="danger"),A({show:!0,text:e,type:t}),window.history.replaceState(null,null,"/admin/login")}}),[l]);var I=function(e){C(Object(s.a)(Object(s.a)({},U),{},Object(a.a)({},e.target.name,e.target.value)))},D=function(){g(!0),(new h.a).get("POST","/login",U,!1,(function(e,a){g(!1),A({show:!0,text:"Login Successful",type:"success"}),t({type:"set",authToken:e.access_tokens[e.access_tokens.length-1]}),t({type:"set",authUser:e}),u.a.set("authToken",e.access_tokens[e.access_tokens.length-1]),localStorage.setItem("authUser",JSON.stringify(e)),(new h.a).checkUser(),n.push("/dashboard")}),(function(e){g(!1),A({show:!0,text:e,type:"danger"})}))};return Object(f.jsxs)("div",{className:"c-app c-default-layout flex-row align-items-center",children:["undefined"===b||void 0===b||""===b||null===b?void u.a.remove("authToken"):Object(f.jsx)(o.a,{to:"/dashboard"}),Object(f.jsx)(d.m,{children:Object(f.jsx)(d.L,{className:"justify-content-center",children:Object(f.jsx)(d.l,{md:"5",children:Object(f.jsx)(d.j,{children:Object(f.jsx)(d.g,{className:"p-4",children:Object(f.jsxs)(d.h,{children:[Object(f.jsx)("h1",{children:"Login"}),Object(f.jsx)("p",{className:"text-muted",children:"Sign In to your account"}),"Email Not Verified"===N.text?Object(f.jsx)(d.a,{color:"warning",show:!0,children:v?"Sending Mail..":Object(f.jsxs)(f.Fragment,{children:["Your email is not verified, please verify your email to access your account. ",Object(f.jsx)(d.G,{onClick:function(){w(!0),(new h.a).get("POST","/resend",U,!1,(function(e,t){w(!1),A({show:!0,text:t,type:"success"})}),(function(e){w(!1),A({show:!0,text:e,type:"danger"})}))},children:"Click Here"})," to resend verification mail."]})}):Object(f.jsx)(d.a,{color:N.type,show:N.show,onShowChange:function(e){A(Object(s.a)(Object(s.a)({},N),{},{show:e}))},closeButton:!0,children:N.text}),Object(f.jsxs)(d.v,{onSubmit:function(e){e.preventDefault(),D()},children:[Object(f.jsxs)(d.B,{className:"mb-3",children:[Object(f.jsx)(d.D,{children:Object(f.jsx)(d.E,{children:Object(f.jsx)(j.a,{name:"cil-user"})})}),Object(f.jsx)(d.A,{name:"email",type:"text",value:U.email||"",placeholder:"Username",onChange:I})]}),Object(f.jsxs)(d.B,{className:"mb-4",children:[Object(f.jsx)(d.D,{children:Object(f.jsx)(d.E,{children:Object(f.jsx)(j.a,{name:"cil-lock-locked"})})}),Object(f.jsx)(d.A,{name:"password",value:U.password||"",type:"password",placeholder:"Password",onChange:I})]}),Object(f.jsxs)(d.L,{children:[Object(f.jsx)(d.l,{xs:"6",className:"text-left",children:Object(f.jsx)(d.f,{to:"/forgot-password",color:"link",className:"px-0",children:"Forgot password?"})}),Object(f.jsx)(d.l,{xs:"6",className:"text-right",children:Object(f.jsx)(d.f,{color:"primary",type:"submit",className:"px-4",children:O?Object(f.jsx)(d.U,{className:"mt-1",color:"light",size:"sm"}):"Login"})})]})]})]})})})})})})]})}},639:function(e,t,n){"use strict";var a=n(640),s=n(163);t.a=function e(){var t=this;Object(a.a)(this,e),this.get=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},i={};if(i.method=e,s){var o=new Headers;o.append("Authorization","Bearer "+t.state.authToken),i.headers=o}if(a){var l=t.getFormData(a);i.body=l}fetch(t.baseUrl+n,i).then((function(e){return e.json()})).then((function(e){1===e.status?c(e.data,e.message):r(e.message)}),(function(e){r("Something went wrong, please contact the admin or try again later.")}))},this.getFormData=function(e){var t=new FormData;if(e)for(var n in e)e.hasOwnProperty(n)&&t.append(n,e[n]);return t},this.checkUser=function(){t.get("GET","/check",null,!0,(function(e,t){s.a.dispatch({type:"set",userPermissions:e}),localStorage.setItem("userPermissions",JSON.stringify(e))}),(function(e){console.log(e)}))},this.baseUrl="https://parvaty.me/api/admin",this.state=s.a.getState()}},640:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return a}))},641:function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,s=!1,c=void 0;try{for(var r,i=e[Symbol.iterator]();!(a=(r=i.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(o){s=!0,c=o}finally{try{a||null==i.return||i.return()}finally{if(s)throw c}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return s}))}}]);
//# sourceMappingURL=6.dc214f4d.chunk.js.map