{"version":3,"sources":["views/pages/Login.js","Api.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js"],"names":["Login","props","dispatch","useDispatch","history","useHistory","params","useParams","token","Cookies","get","useState","loading","isLoading","sending","isSending","show","text","type","alert","showAlert","email","password","form","setForm","useEffect","status","msg","window","replaceState","setInput","e","target","name","value","verifyLogin","Api","data","authToken","access_tokens","length","authUser","set","localStorage","setItem","JSON","stringify","checkUser","push","error","className","undefined","remove","to","md","color","onClick","onShowChange","s","closeButton","onSubmit","event","preventDefault","placeholder","onChange","xs","size","method","url","auth","success","errors","parameters","authHeaders","Headers","append","state","headers","formData","getFormData","body","fetch","baseUrl","then","res","json","result","message","FormData","key","hasOwnProperty","store","userPermissions","console","log","this","getState","_classCallCheck","instance","Constructor","TypeError","_arrayLikeToArray","arr","len","i","arr2","Array","_slicedToArray","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","_s","_i","next","done","err","o","minLen","n","prototype","toString","call","slice","constructor","from","test"],"mappings":"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","file":"static/js/6.cb7bb611.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport Cookies from 'js-cookie';\r\nimport Api from '../../Api';\r\nimport {\r\n    Redirect\r\n} from 'react-router-dom'\r\nimport {\r\n    CButton,\r\n    CSpinner,\r\n    CCard,\r\n    CLink,\r\n    CCardBody,\r\n    CCardGroup,\r\n    CCol,\r\n    CContainer,\r\n    CForm,\r\n    CInput,\r\n    CInputGroup,\r\n    CInputGroupPrepend,\r\n    CInputGroupText,\r\n    CRow,\r\n    CAlert as Alert\r\n} from '@coreui/react'\r\nimport CIcon from '@coreui/icons-react'\r\n\r\nconst Login = (props) => {\r\n    const dispatch = useDispatch()\r\n    const history = useHistory();\r\n    const params = useParams();\r\n    const token = Cookies.get('authToken');\r\n    const [loading, isLoading] = useState(false)\r\n    const [sending, isSending] = useState(false)\r\n    const [alert, showAlert] = useState({\r\n        show: false,\r\n        text: null,\r\n        type: 'info'\r\n    });\r\n    const [form, setForm] = useState({\r\n        email: null,\r\n        password: null\r\n    })\r\n    useEffect(() => {\r\n        if (params.status) {\r\n            let msg = ''\r\n            let type = ''\r\n            if (params.status === 'verified') {\r\n                msg = \"Email Verified Successfully.\"\r\n                type = 'success'\r\n            } else if (params.status === 'already-verified') {\r\n                msg = \"Email Verified Successfully.\"\r\n                type = 'success'\r\n            }\r\n            else if (params.status === 'invalid-user') {\r\n                msg = \"Invalid Email Address\"\r\n                type = 'danger'\r\n            }\r\n            showAlert({\r\n                show: true,\r\n                text: msg,\r\n                type: type\r\n            })\r\n            window.history.replaceState(null, null, \"/admin/login\")\r\n        }\r\n    }, [params]);\r\n    const setInput = (e) => {\r\n        setForm({ ...form, [e.target.name]: e.target.value })\r\n    }\r\n    const dismissAlert = (s) => {\r\n        showAlert({ ...alert, show: s, })\r\n    }\r\n    const removeCookie = () => {\r\n        Cookies.remove(\"authToken\")\r\n    }\r\n    const checkLogin = (event) => {\r\n        event.preventDefault();\r\n        verifyLogin();\r\n    }\r\n    const verifyLogin = () => {\r\n        isLoading(true)\r\n        new Api().get(\"POST\", \"/login\", form, false, (data, msg) => {\r\n            isLoading(false)\r\n            showAlert({ show: true, text: \"Login Successful\", type: 'success' })\r\n            dispatch({ type: \"set\", authToken: data.access_tokens[data.access_tokens.length - 1] })\r\n            dispatch({ type: \"set\", authUser: data })\r\n            Cookies.set(\"authToken\", data.access_tokens[data.access_tokens.length - 1])\r\n            localStorage.setItem('authUser', JSON.stringify(data));\r\n            new Api().checkUser();\r\n            history.push(\"/dashboard\");\r\n        }, (error) => {\r\n            isLoading(false)\r\n            showAlert({ show: true, text: error, type: 'danger' })\r\n        })\r\n    }\r\n\r\n    const resendActivation = () => {\r\n        isSending(true)\r\n        new Api().get(\"POST\", \"/resend\", form, false, (data, msg) => {\r\n            isSending(false)\r\n            showAlert({ show: true, text: msg, type: 'success' })\r\n        }, (error) => {\r\n            isSending(false)\r\n            showAlert({ show: true, text: error, type: 'danger' })\r\n        })\r\n    }\r\n    return (\r\n        <div className=\"c-app c-default-layout flex-row align-items-center\">\r\n            {(token === 'undefined' || token === undefined || token === '' || token === null) ? removeCookie()\r\n                : <Redirect to=\"/dashboard\" />}\r\n            <CContainer>\r\n                <CRow className=\"justify-content-center\">\r\n                    <CCol md=\"5\">\r\n                        <CCardGroup>\r\n                            <CCard className=\"p-4\">\r\n                                <CCardBody>\r\n                                    <h1>Login</h1>\r\n                                    <p className=\"text-muted\">Sign In to your account</p>\r\n\r\n                                    {\r\n                                        (alert.text === 'Email Not Verified') ?\r\n                                            <Alert color={'warning'} show={true}>\r\n                                                {\r\n                                                    (sending) ? 'Sending Mail..' : <>Your email is not verified, please verify your email to access your account. <CLink onClick={resendActivation}>Click Here</CLink> to resend verification mail.</>\r\n                                                }\r\n\r\n                                            </Alert>\r\n                                            :\r\n                                            <Alert color={alert.type} show={alert.show} onShowChange={dismissAlert} closeButton>\r\n                                                {alert.text}\r\n                                                {/* {(alert.type === \"success\") ? <> Redirecting <CSpinner className=\"mt-1\" color=\"success\" size=\"sm\" /></> : null} */}\r\n                                            </Alert>\r\n                                    }\r\n                                    <CForm onSubmit={checkLogin}>\r\n\r\n                                        <CInputGroup className=\"mb-3\">\r\n                                            <CInputGroupPrepend>\r\n                                                <CInputGroupText>\r\n                                                    <CIcon name=\"cil-user\" />\r\n                                                </CInputGroupText>\r\n                                            </CInputGroupPrepend>\r\n                                            <CInput name=\"email\" type=\"text\" value={form.email || ''} placeholder=\"Username\" onChange={setInput} />\r\n                                        </CInputGroup>\r\n                                        <CInputGroup className=\"mb-4\">\r\n                                            <CInputGroupPrepend>\r\n                                                <CInputGroupText>\r\n                                                    <CIcon name=\"cil-lock-locked\" />\r\n                                                </CInputGroupText>\r\n                                            </CInputGroupPrepend>\r\n                                            <CInput name=\"password\" value={form.password || ''} type=\"password\" placeholder=\"Password\" onChange={setInput} />\r\n                                        </CInputGroup>\r\n                                        <CRow>\r\n                                            <CCol xs=\"6\" className=\"text-left\">\r\n                                                <CButton to=\"/forgot-password\" color=\"link\" className=\"px-0\">Forgot password?</CButton>\r\n                                            </CCol>\r\n                                            <CCol xs=\"6\" className=\"text-right\">\r\n                                                <CButton color=\"primary\" type=\"submit\" className=\"px-4\">\r\n                                                    {(!loading) ? 'Login' : <CSpinner className=\"mt-1\" color=\"light\" size=\"sm\" />}\r\n                                                </CButton>\r\n                                            </CCol>\r\n                                        </CRow>\r\n                                    </CForm>\r\n\r\n                                </CCardBody>\r\n                            </CCard>\r\n\r\n                        </CCardGroup>\r\n                    </CCol>\r\n                </CRow>\r\n            </CContainer>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import store from './store';\r\n\r\nclass Api {\r\n\r\n    // \r\n    constructor() {\r\n        this.baseUrl = \"http://127.0.0.1:8000/api/admin\";\r\n        // this.baseUrl = \"https://parvaty.me/api/admin\";\r\n        this.state = store.getState();\r\n        // this.dispatch = useDispatch()\r\n    }\r\n\r\n    get = (method, url, data = null, auth = false, success = () => { }, errors = () => { }) => {\r\n        // let Params\r\n        let parameters = {};\r\n        parameters.method = method;\r\n\r\n        // set auth header\r\n        if (auth) {\r\n            var authHeaders = new Headers();\r\n            authHeaders.append(\"Authorization\", \"Bearer \" + this.state.authToken)\r\n            parameters.headers = authHeaders;\r\n        }\r\n        // Form data\r\n        if (data) {\r\n            const formData = this.getFormData(data)\r\n            parameters.body = formData\r\n        }\r\n\r\n        // Send\r\n        fetch(this.baseUrl + url, parameters).then(res => res.json())\r\n            .then(\r\n                (result) => {\r\n                    if (result.status === 1) {\r\n                        success(result.data, result.message)\r\n                    } else {\r\n                        errors(result.message)\r\n                    }\r\n                },\r\n                (error) => {\r\n                    errors(\"Something went wrong, please contact the admin or try again later.\")\r\n                }\r\n            )\r\n    }\r\n    getFormData = (data) => {\r\n        const formData = new FormData();\r\n        if (data) {\r\n            for (var key in data) {\r\n                if (data.hasOwnProperty(key)) {\r\n                    formData.append(key, data[key])\r\n                }\r\n            }\r\n        }\r\n        return formData;\r\n    }\r\n    checkUser = () => {\r\n        this.get(\"GET\", \"/check\", null, true, (data, msg) => {\r\n            store.dispatch({ type: \"set\", userPermissions: data })\r\n            localStorage.setItem('userPermissions', JSON.stringify(data));\r\n        }, (error) => {\r\n            console.log(error)\r\n        })\r\n    }\r\n}\r\nexport default Api;\r\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}"],"sourceRoot":""}